<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <title>Query Builder | Taichi ORM</title><meta name="description" content="A developer-friendly SQL ORM">
    <link rel="preload" href="/taichi-orm/assets/js/runtime~app.2e4b9ea4.js" as="script"><link rel="preload" href="/taichi-orm/assets/css/styles.9e1eec30.css" as="style"><link rel="preload" href="/taichi-orm/assets/js/812.bbad6e40.js" as="script"><link rel="preload" href="/taichi-orm/assets/js/app.d70b86ca.js" as="script">
    <link rel="stylesheet" href="/taichi-orm/assets/css/styles.9e1eec30.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/taichi-orm/" class=""><!----><span class="site-name">Taichi ORM</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/taichi-orm/guide/" class="nav-link router-link-active" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/thfai2000/taichi-orm" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/taichi-orm/guide/" class="nav-link router-link-active" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/thfai2000/taichi-orm" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/taichi-orm/guide/" class="nav-link router-link-active sidebar-heading sidebar-item active" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/taichi-orm/guide/" class="nav-link router-link-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/getting-started.html" class="nav-link sidebar-item" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><p class="sidebar-item active">Concepts</p><ul class="sidebar-sub-items"><li><!--[--><a href="/taichi-orm/guide/concepts/orm.html" class="nav-link sidebar-item" aria-label="ORM"><!--[--><!--]--> ORM <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/database-context.html" class="nav-link sidebar-item" aria-label="DatabaseContext"><!--[--><!--]--> DatabaseContext <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/schema.html" class="nav-link sidebar-item" aria-label="Schema"><!--[--><!--]--> Schema <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/model.html" class="nav-link sidebar-item" aria-label="Model"><!--[--><!--]--> Model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/property.html" class="nav-link sidebar-item" aria-label="Property"><!--[--><!--]--> Property <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/property-type.html" class="nav-link sidebar-item" aria-label="PropertyType"><!--[--><!--]--> PropertyType <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/relations.html" class="nav-link sidebar-item" aria-label="Relations"><!--[--><!--]--> Relations <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/concepts/model-api.html" class="nav-link sidebar-item" aria-label="Model API"><!--[--><!--]--> Model API <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Query Builder"><!--[--><!--]--> Query Builder <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html#scalar" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Scalar"><!--[--><!--]--> Scalar <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html#dataset" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Dataset"><!--[--><!--]--> Dataset <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html#insertstatement" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="InsertStatement"><!--[--><!--]--> InsertStatement <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html#updatestatement" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="UpdateStatement"><!--[--><!--]--> UpdateStatement <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/taichi-orm/guide/concepts/query-builder.html#deletestatement" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DeleteStatement"><!--[--><!--]--> DeleteStatement <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><p class="sidebar-item">Query Examples</p><ul class="sidebar-sub-items"><li><!--[--><a href="/taichi-orm/guide/query-examples/filtering.html" class="nav-link sidebar-item" aria-label="Select and Filter"><!--[--><!--]--> Select and Filter <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/query-examples/operators.html" class="nav-link sidebar-item" aria-label="Operators"><!--[--><!--]--> Operators <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/taichi-orm/guide/typescript-support.html" class="nav-link sidebar-item" aria-label="Typescript Support"><!--[--><!--]--> Typescript Support <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><p class="sidebar-item">Use Cases</p><ul class="sidebar-sub-items"><li><!--[--><a href="/taichi-orm/guide/use-cases/scalar-transform.html" class="nav-link sidebar-item" aria-label="Scalar Transformation"><!--[--><!--]--> Scalar Transformation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/guide/use-cases/access-control.html" class="nav-link sidebar-item" aria-label="Access Control"><!--[--><!--]--> Access Control <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><a href="/taichi-orm/reference/" class="nav-link sidebar-heading sidebar-item" aria-label="Reference"><!--[--><!--]--> Reference <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/taichi-orm/reference/scalar.md" class="nav-link sidebar-item" aria-label="/reference/scalar.md"><!--[--><!--]--> /reference/scalar.md <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/taichi-orm/reference/config.md" class="nav-link sidebar-item" aria-label="/reference/config.md"><!--[--><!--]--> /reference/config.md <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="query-builder" tabindex="-1"><a class="header-anchor" href="#query-builder" aria-hidden="true">#</a> Query Builder</h1><p>Taichi Query Builder doesn&#39;t like <code>Knex.QueryBuilder</code>. It is more high-level in usage because it use the defined <code>Schema</code> and <code>Property</code> to build Query. It means that the actual table names and actual field names are abstracted and taken care by ORM. Besides, the <code>ComputeFunction</code> can be used in building your Query.</p><p>There are several kinds of <code>Query Builder</code></p><p>You can even use the <code>ComputeProperty</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Although The Model API allows to use raw SQL, QueryBuilder is still necessary in some suitations:</p><ol><li>If you want to form unstructured records by joining two database tables, you need QueryBuilder. The common use case is producing metrics and reports. Model API form structured data that widely be used in building Restful API or GraphQL resolver.</li><li>Sometimes performance is critical. you need query builder to build optimised SQL (such as specifying Index Name).</li><li>Model.update() and Model.delete() will query the involved records before update or delete, and query the affected data again. But querybuilder allows to skip querying the affected records.</li></ol><h2 id="scalar" tabindex="-1"><a class="header-anchor" href="#scalar" aria-hidden="true">#</a> Scalar</h2><p>It represent a SQL single value with a specifc type like number, string or date. Dataset can be transformed into a Scalar. For example, &#39;SELECT count(*) FROM table1&#39; can act as a Scalar in number type.</p><h2 id="dataset" tabindex="-1"><a class="header-anchor" href="#dataset" aria-hidden="true">#</a> Dataset</h2><p>It is a query builder and represents the SELECT statement.</p><h2 id="insertstatement" tabindex="-1"><a class="header-anchor" href="#insertstatement" aria-hidden="true">#</a> InsertStatement</h2><h2 id="updatestatement" tabindex="-1"><a class="header-anchor" href="#updatestatement" aria-hidden="true">#</a> UpdateStatement</h2><h2 id="deletestatement" tabindex="-1"><a class="header-anchor" href="#deletestatement" aria-hidden="true">#</a> DeleteStatement</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The names of these operators and functions are first-letter captialized</p></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/thfai2000/taichi-orm/edit/main/guide/concepts/query-builder.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/7/2021, 3:30:41 PM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: thfai2000@gmail.com">Eddie Tang</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ‚Üê <a href="/taichi-orm/guide/concepts/model-api.html" class="nav-link" aria-label="Model API"><!--[--><!--]--> Model API <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/taichi-orm/assets/js/runtime~app.2e4b9ea4.js" defer></script><script src="/taichi-orm/assets/js/812.bbad6e40.js" defer></script><script src="/taichi-orm/assets/js/app.d70b86ca.js" defer></script>
  </body>
</html>
